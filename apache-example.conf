<VirtualHost *:80>
	# Replace these values with the host name/ip
	ServerName 127.0.0.1
	#ServerAlias nuget.company.com
	#ServerAlias nuget

	erverAdmin your_email@company.com
	DocumentRoot /var/www/pynuget/public

	RewriteRule ^/$ /index
	RewriteRule ^/\$metadata$ /metadata.xml
	RewriteRule ^/Search\(\)/\$count$ /count
	RewriteRule ^/Search\(\)$ /search
	RewriteRule ^/Packages\(\)$ /search
	RewriteRule ^/Packages\(Id='([^']+)',Version='([^']+)'\)$ /findByID?id=$1&version=$2
	RewriteRule ^/GetUpdates\(\)$ /updates
	RewriteRule ^/FindPacakgesById\(\)$ /findByID

	# NuGet.exe sometimes uses two slashes (//download/blah)
	RewriteRule ^//?download/([^/]+)/([^/]+)$ /download?id=$1&version=$2
	RewriteRule ^/([^/]+)/([^/]+)$ /delete?id=$1&version=$2

	# NuGet.exe adds /api/v2 to URL when the server is at the root
	RewriteRule ^/api/v2/package/$ /index
	RewriteRule ^/api/v2/package/([^/]+)/([^/]+)$ /delete?id=$1&version=$2

	# If running in a corporate environment, add the list of allowable subnets here
	<Directory /var/www/pynuget>
		<RequireAny>
			Require ip 192.168.11
			Require ip 192.168.75
			Require ip 192.168.88
			Require ip 192.168.84
			Require ip 192.168.17
			Require ip 192.168.13
		</RequireAny>

		Require all denied

		AllowOverride none
	</Directory>

	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
